{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/web-nu%20trang/tierra/client/src/assets/icons/inside_cart.js"],"sourcesContent":["import React from \"react\";\r\n\r\nconst InsideCart = () => {\r\n  return (\r\n    <svg\r\n      width=\"300\"\r\n      height=\"300\"\r\n      viewBox=\"0 0 300 300\"\r\n      fill=\"none\"\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n    >\r\n      <path\r\n        d=\"M187.5 35.5875V60.7875C187.501 63.1671 188.182 65.4969 189.461 67.503C190.741 69.5091 192.567 71.1083 194.725 72.1125L199.837 74.5C198.762 92.0375 192.85 107.45 184.287 118.575C174.812 130.9 162.587 137.5 150 137.5C137.412 137.5 125.2 130.9 115.725 118.575C107.15 107.45 101.25 92.0375 100.175 74.5L105.3 72.125C107.456 71.1153 109.279 69.5108 110.555 67.5001C111.83 65.4893 112.505 63.1561 112.5 60.775V35.5875C112.5 29.475 116.925 24.275 123 23.5875C140.944 21.5115 159.068 21.5115 177.012 23.5875C183.087 24.275 187.512 29.475 187.512 35.5875M76.212 85.6875L35.6245 104.625C31.1399 106.719 27.6651 110.501 25.9581 115.147C24.251 119.793 24.4502 124.925 26.512 129.425L82.4995 251.562C83.9949 254.825 86.3951 257.59 89.4152 259.528C92.4352 261.467 95.9482 262.499 99.537 262.5H200.475C204.063 262.499 207.576 261.467 210.596 259.528C213.617 257.59 216.017 254.825 217.512 251.562L273.5 129.437C275.565 124.935 275.764 119.798 274.054 115.149C272.344 110.5 268.865 106.717 264.375 104.625L223.787 85.6875C221.137 104.025 214.212 120.687 204.112 133.812C192.7 148.662 176.862 159.35 158.512 161.912L177.362 188.3C178.498 189.89 179.109 191.796 179.109 193.75C179.109 195.704 178.498 197.61 177.362 199.2L152.55 233.95C152.26 234.355 151.879 234.685 151.436 234.913C150.994 235.141 150.503 235.26 150.006 235.26C149.508 235.26 149.018 235.141 148.575 234.913C148.133 234.685 147.751 234.355 147.462 233.95L122.65 199.2C121.513 197.61 120.903 195.704 120.903 193.75C120.903 191.796 121.513 189.89 122.65 188.3L141.5 161.912C123.162 159.35 107.312 148.662 95.8995 133.825C85.7995 120.7 78.8745 104.037 76.212 85.6875Z\"\r\n        fill=\"#C9C9C9\"\r\n      />\r\n    </svg>\r\n  );\r\n};\r\n\r\nexport default InsideCart;\r\n"],"names":[],"mappings":";;;;;AAAA;;;AAEA,MAAM,aAAa;IACjB,qBACE,8OAAC;QACC,OAAM;QACN,QAAO;QACP,SAAQ;QACR,MAAK;QACL,OAAM;kBAEN,cAAA,8OAAC;YACC,GAAE;YACF,MAAK;;;;;;;;;;;AAIb;uCAEe","debugId":null}},
    {"offset": {"line": 38, "column": 0}, "map": {"version":3,"sources":["file:///D:/web-nu%20trang/tierra/client/src/app/%28user%29/cart/page.js"],"sourcesContent":["\"use client\";\nimport React from \"react\";\nimport { toIntegerVND } from \"../utils/price\";\nimport InsideCart from \"../../../assets/icons/inside_cart\";\nimport TrashIcon from \"@/assets/icons/trash_icon\";\n\nconst fmt = (v) => new Intl.NumberFormat(\"vi-VN\", { maximumFractionDigits: 0 }).format(v);\n\nconst loadCart = () => {\n  if (typeof window === \"undefined\") return [];\n  try {\n    const raw = localStorage.getItem(\"cart_items\");\n    const parsed = JSON.parse(raw || \"[]\");\n    return Array.isArray(parsed) ? parsed : [];\n  } catch {\n    return [];\n  }\n};\n\nconst saveCart = (items) => {\n  try {\n    localStorage.setItem(\"cart_items\", JSON.stringify(items));\n  } catch {}\n};\n\nexport default function Page() {\n  const [items, setItems] = React.useState([]);\n\n  React.useEffect(() => {\n    setItems(loadCart());\n  }, []);\n\n  const setAndSave = (updater) => {\n    setItems((prev) => {\n      const next = typeof updater === \"function\" ? updater(prev) : updater;\n      saveCart(next);\n      return next;\n    });\n  };\n\n  const toggleAll = (checked) => {\n    setAndSave(items.map((it) => ({ ...it, selected: !!checked })));\n  };\n\n  const toggleOne = (id, checked) => {\n    setAndSave(items.map((it) => (String(it.product_id) === String(id) ? { ...it, selected: !!checked } : it)));\n  };\n\n  const removeOne = (id) => {\n    setAndSave(items.filter((it) => String(it.product_id) !== String(id)));\n  };\n\n  const clearAll = () => setAndSave([]);\n\n  const changeQty = (id, delta) => {\n    setAndSave(\n      items.map((it) => {\n        if (String(it.product_id) !== String(id)) return it;\n        const next = Math.max(1, (Number(it.quantity) || 1) + delta);\n        return { ...it, quantity: next };\n      })\n    );\n  };\n\n  const priceParts = (it) => {\n    const price = toIntegerVND(it.price);\n    const discount = toIntegerVND(it.discount_price);\n    const has = discount > 0 && discount < price;\n    const final = has ? Math.max(price - discount, 0) : price;\n    return { price, discount: has ? discount : 0, final };\n  };\n\n  const selectedItems = items.filter((it) => it.selected);\n  const subtotal = selectedItems.reduce((sum, it) => sum + priceParts(it).price * (Number(it.quantity) || 1), 0);\n  const discountTotal = selectedItems.reduce((sum, it) => sum + priceParts(it).discount * (Number(it.quantity) || 1), 0);\n  const total = Math.max(subtotal - discountTotal, 0);\n\n  const allChecked = items.length > 0 && items.every((it) => it.selected);\n\n  if (items.length === 0) {\n    return (\n      <div className=\"w-full flex justify-center bg-[#ECECEC]\">\n        <div className=\"w-[90%] max-w-[1100px] mt-[60px] mb-12\">\n          <div className=\"bg-white rounded-xl border p-10 flex items-center justify-center \">\n            <div className=\"text-center\">\n              <InsideCart/>\n              <div className=\"text-lg\">Giỏ hàng hiện đang trống</div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"w-full flex justify-center mt-6 mb-12\">\n      <div className=\"w-[90%] max-w-[1200px]\">\n        <div className=\" bg-white rounded-xl border p-6\">\n          <div className=\"text-center text-2xl font-semibold mb-6\">Giỏ hàng</div>\n          <div className=\"flex items-center justify-between mb-4\">\n            <label className=\"flex items-center gap-2 text-sm\">\n              <input\n                type=\"checkbox\"\n                checked={allChecked}\n                onChange={(e) => toggleAll(e.target.checked)}\n              />\n              Tất cả sản phẩm\n            </label>\n            <button className=\"text-sm text-red-500\" onClick={clearAll}>Xóa tất cả</button>\n          </div>\n\n          <div className=\" bg-white rounded-lg\">\n            {items.map((it) => {\n              const { price, final } = priceParts(it);\n              return (\n                <div key={it.product_id} className=\"p-4 flex items-center gap-4\">\n                  <input\n                    type=\"checkbox\"\n                    checked={!!it.selected}\n                    onChange={(e) => toggleOne(it.product_id, e.target.checked)}\n                  />\n                  {it.image_url ? (\n                    <img src={it.image_url} alt={it.name} className=\"w-[64px] h-[64px] object-cover rounded\" />\n                  ) : (\n                    <div className=\"w-[64px] h-[64px] bg-gray-200 rounded\" />\n                  )}\n                  <div className=\"flex-1\">\n                    <div className=\"text-[16px]\">{it.name}</div>\n                    <div className=\"mt-2 inline-flex items-center border rounded bg-[#F4F4F4]\">\n                      <button className=\"px-3 py-1 cursor-pointer\" onClick={() => changeQty(it.product_id, -1)}>-</button>\n                      <div className=\"px-4 py-1 border-l border-r select-none\">{Number(it.quantity) || 1}</div>\n                      <button className=\"px-3 py-1 cursor-pointer\" onClick={() => changeQty(it.product_id, 1)}>+</button>\n                    </div>\n                    <div className=\"mt-2 text-[#3A3A3A] font-semibold\">{fmt(final)} đ</div>\n                  </div>\n                  <button\n                    className=\"text-gray-400 hover:text-red-500\"\n                    title=\"Xóa\"\n                    onClick={() => removeOne(it.product_id)}\n                  >\n                    <TrashIcon/>\n                  </button>\n                </div>\n              );\n            })}\n          </div>\n\n          <div className=\"mt-6 grid grid-cols-1 md:grid-cols-3\">\n            <div className=\"md:col-start-3 md:col-span-1 md:justify-self-end w-full md:w-[300px]\">\n              <div className=\"text-sm text-gray-700 flex justify-between\"><span>Tạm tính</span><span>{fmt(subtotal)} đ</span></div>\n              <div className=\"text-sm text-gray-700 flex justify-between\"><span>Giảm giá</span><span>{fmt(discountTotal)} đ</span></div>\n              <div className=\"text-base font-semibold flex justify-between mt-1\"><span>Tổng tiền</span><span>{fmt(total)} đ</span></div>\n              <button className=\"mt-4 w-full h-[44px] rounded-full bg-[#9B8D6F] text-white\">Tiếp tục</button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}