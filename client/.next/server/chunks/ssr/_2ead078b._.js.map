{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/web-nu%20trang/tierra/client/src/assets/icons/check_icon.js"],"sourcesContent":["import React from \"react\";\r\n\r\nconst CheckIcon = () => {\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      viewBox=\"0 0 20 20\"\r\n      fill=\"currentColor\"\r\n      className=\"w-5 h-5 text-white\"\r\n    >\r\n      <path\r\n        fillRule=\"evenodd\"\r\n        d=\"M16.707 5.293a1 1 0 00-1.414 0L8 12.586 4.707 9.293A1 1 0 103.293 10.707l4 4a1 1 0 001.414 0l8-8a1 1 0 000-1.414z\"\r\n        clipRule=\"evenodd\"\r\n      />\r\n    </svg>\r\n  );\r\n};\r\n\r\nexport default CheckIcon;\r\n"],"names":[],"mappings":";;;;;AAAA;;;AAEA,MAAM,YAAY;IAChB,qBACE,8OAAC;QACC,OAAM;QACN,SAAQ;QACR,MAAK;QACL,WAAU;kBAEV,cAAA,8OAAC;YACC,UAAS;YACT,GAAE;YACF,UAAS;;;;;;;;;;;AAIjB;uCAEe","debugId":null}},
    {"offset": {"line": 38, "column": 0}, "map": {"version":3,"sources":["file:///D:/web-nu%20trang/tierra/client/src/app/%28user%29/earring/%5BearringId%5D/page.js"],"sourcesContent":["\"use client\";\r\nimport React from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { useParams } from \"next/navigation\";\r\nimport { fetchProducts, selectProductsState } from \"../../../../store/features/couter/fechDataSlice.js\";\r\nimport { toIntegerVND } from \"../../utils/price\";\r\nimport CheckIcon from \"../../../../assets/icons/check_icon.js\";\r\n\r\nconst formatPriceVND = (input) => new Intl.NumberFormat(\"vi-VN\", { maximumFractionDigits: 0 }).format(toIntegerVND(input));\r\n\r\nexport default function Page() {\r\n  const dispatch = useDispatch();\r\n  const { products, status, error } = useSelector(selectProductsState);\r\n  const params = useParams();\r\n  const ringId = params?.earringId;\r\n\r\n  React.useEffect(() => {\r\n    if (status === \"idle\") {\r\n      dispatch(fetchProducts());\r\n    }\r\n  }, [status, dispatch]);\r\n\r\n  const product = React.useMemo(() => {\r\n    return Array.isArray(products)\r\n      ? products.find((p) => String(p?.product_id) === String(ringId))\r\n      : undefined;\r\n  }, [products, ringId]);\r\n\r\n  const images = Array.isArray(product?.ProductImages) ? product.ProductImages : [];\r\n  const mainImage = images.find((im) => im?.is_main) || images[0];\r\n\r\n  const addToCart = () => {\r\n    if (!product) return;\r\n    const item = {\r\n      product_id: product.product_id,\r\n      name: product.name,\r\n      price: product.price,\r\n      discount_price: product.discount_price,\r\n      quantity: 1,\r\n      selected: true,\r\n      image_url: mainImage?.image_url || (images[0]?.image_url || \"\"),\r\n    };\r\n    try {\r\n      const raw = localStorage.getItem(\"cart_items\");\r\n      const list = raw ? JSON.parse(raw) : [];\r\n      let found = false;\r\n      const updated = Array.isArray(list)\r\n        ? list.map((it) => {\r\n            if (String(it.product_id) === String(item.product_id)) {\r\n              found = true;\r\n              return { ...it, quantity: (Number(it.quantity) || 1) + 1, selected: true };\r\n            }\r\n            return it;\r\n          })\r\n        : [];\r\n      const next = found ? updated : [...updated, item];\r\n      localStorage.setItem(\"cart_items\", JSON.stringify(next));\r\n    alert(\"da them vao gio\")\r\n    } catch {}\r\n  };\r\n\r\n  return (\r\n    <div className=\"w-full flex justify-center mt-6 mb-12\">\r\n      <div className=\"w-[90%] max-w-[1200px]\">\r\n        {status === \"failed\" && (\r\n          <div className=\"p-4 text-sm text-red-500\">Lỗi tải dữ liệu: {String(error)}</div>\r\n        )}\r\n\r\n        {(status === \"loading\" || status === \"idle\") && (\r\n          <div className=\"p-4 text-sm text-gray-500\">Đang tải sản phẩm...</div>\r\n        )}\r\n\r\n        {status === \"succeeded\" && product && (\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-8\">\r\n            <div>\r\n              {mainImage?.image_url && (\r\n                <img\r\n                  src={mainImage.image_url}\r\n                  alt={product.name}\r\n                  className=\"w-full h-[420px] object-cover rounded-md border\"\r\n                />\r\n              )}\r\n              {images.length > 1 && (\r\n                <div className=\"mt-4 grid grid-cols-4 gap-3\">\r\n                  {images.map((img) => (\r\n                    <img\r\n                      key={img.image_id}\r\n                      src={img.image_url}\r\n                      alt={product.name}\r\n                      className={`h-[80px] w-full object-cover rounded border ${\r\n                        img.image_id === mainImage?.image_id ? \"ring-2 ring-[#9B8D6F]\" : \"\"\r\n                      }`}\r\n                    />\r\n                  ))}\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            <div className=\"flex flex-col gap-4\">\r\n              <h1 className=\"text-2xl font-semibold text-[#3A3A3A]\">{product.name}</h1>\r\n              {(() => {\r\n                const priceInt = toIntegerVND(product.price);\r\n                const discountInt = toIntegerVND(product.discount_price);\r\n                const hasDiscount = Number.isFinite(priceInt) && Number.isFinite(discountInt) && discountInt > 0 && discountInt < priceInt;\r\n                const finalPrice = hasDiscount ? Math.max(priceInt - discountInt, 0) : priceInt;\r\n                return hasDiscount ? (\r\n                  <div className=\"flex items-baseline gap-2\">\r\n                    <span className=\"text-xl font-semibold text-[#9B8D6F]\">{formatPriceVND(finalPrice)} ₫</span>\r\n                    <span className=\"text-base text-gray-400 line-through\">{formatPriceVND(priceInt)} ₫</span>\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"text-xl text-[#9B8D6F]\">{formatPriceVND(priceInt)} ₫</div>\r\n                );\r\n              })()}\r\n              <div className=\" w-[80px] text-sm font-bold\">\r\n                Chất liệu\r\n                <div className=\" h-[30px] flex justify-center items-center border rounded-[8px] mt-[20px] font-normal\">\r\n                  {product.material === \"vang\" ? <>Vàng</> : <>Kim cương</>}\r\n                </div>\r\n              </div>\r\n              <div className=\" text-sm font-bold\">\r\n                Màu\r\n                <div className=\"mt-[10px] flex items-center gap-3\">\r\n                  {(() => {\r\n                    const current = String(product.color || \"\").toLowerCase();\r\n                    const colors = [\r\n                      { key: \"trang\", hex: \"#D6D6D6\" },\r\n                      { key: \"vang\", hex: \"#F1DC87\" },\r\n                      { key: \"hong\", hex: \"#F2BAA8\" },\r\n                    ];\r\n                    return colors.map((color) => (\r\n                      <div key={color.key} className=\"w-[40px] h-[40px] rounded-[8px] border border-gray-300 relative\" style={{ backgroundColor: color.hex }}>\r\n                        {(current === color.key || (color.key === \"hong\" && current.includes(\"hong\"))) && (\r\n                          <div className=\"absolute inset-0 flex items-center justify-center\">\r\n                            <CheckIcon />\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n                    ));\r\n                  })()}\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\" text-sm font-bold\">\r\n                Tồn kho: {Number.isFinite(product.stock_quantity) ? product.stock_quantity : \"?\"}\r\n              </div>\r\n\r\n              <div className=\"mt-2 flex gap-4\">\r\n                <button onClick={addToCart} className=\" w-[260px] h-[60px] text-[24px] rounded bg-white border border-black cursor-pointer\">Thêm vào giỏ</button>\r\n                <button className=\" w-[260px] h-[60px] text-[24px] rounded border border-[#9B8D6F] text-white bg-[#9B8D6F]\">Mua ngay</button>\r\n              </div>\r\n            </div>\r\n            <div className=\" flex flex-col gap-[20px]\">\r\n              <div className=\" text-[32px] font-medium\">Giới thiệu về sản phẩm</div>\r\n              <div className=\" text-[24px] font-extralight\">{product.description}</div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {status === \"succeeded\" && !product && (\r\n          <div className=\"p-4 text-sm text-gray-500\">Không tìm thấy sản phẩm</div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 408, "column": 0}, "map": {"version":3,"sources":["file:///D:/web-nu%20trang/tierra/client/node_modules/next/navigation.js"],"sourcesContent":["module.exports = require('./dist/client/components/navigation')\n"],"names":[],"mappings":"AAAA,OAAO,OAAO","ignoreList":[0],"debugId":null}}]
}