{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/web-nu%20trang/tierra/client/src/app/%28user%29/bracelet/page.js"],"sourcesContent":["\"use client\";\nimport React from \"react\";\nimport Filters from \"../ring/components/Filters\";\nimport ProductGrid from \"../ring/components/ProductGrid\";\nimport { toIntegerVND } from \"../ring/utils/price\";\nimport { useProducts } from \"../../../store/productsStore.jsx\";\n\nconst parsePrice = toIntegerVND;\n\nexport default function Page() {\n  const { products, status, error, fetchProducts } = useProducts();\n  const [favorites, setFavorites] = React.useState([]);\n\n  React.useEffect(() => {\n    if (status === \"idle\") {\n      fetchProducts();\n    }\n  }, [status, fetchProducts]);\n\n  const [priceRange, setPriceRange] = React.useState(\"\");\n  const [color, setColor] = React.useState(\"\");\n  const [material, setMaterial] = React.useState(\"\");\n  const [sortBy, setSortBy] = React.useState(\"\");\n\n  const displayedData = React.useMemo(() => {\n    let list = Array.isArray(products) ? [...products] : [];\n\n    // category filter for \"vong tay\"\n    list = list.filter((item) => {\n      const cat = item?.Category?.name || \"\";\n      return String(cat).trim().toLowerCase() === \"vong tay\";\n    });\n\n    if (priceRange) {\n      let min = 0, max = Infinity;\n      if (priceRange.includes(\"-\")) {\n        const [minStr, maxStr] = priceRange.split(\"-\");\n        min = Number(minStr);\n        max = Number(maxStr);\n      } else {\n        if (priceRange === \"1\") {\n          min = 0;\n          max = 20;\n        } else if (priceRange === \"2\") {\n          min = 20;\n          max = 30;\n        } else if (priceRange === \"3\") {\n          min = 30;\n          max = 40;\n        } else if (priceRange === \"4\") {\n          min = 40;\n          max = 100;\n        }\n      }\n      list = list.filter((item) => {\n        const price = parsePrice(item.price);\n        return price >= min * 1_000_000 && price <= max * 1_000_000;\n      });\n    }\n\n    if (color) {\n      let colorName = color;\n      if (color === \"5\") colorName = \"Vang\";\n      else if (color === \"6\") colorName = \"Vang hong\";\n      else if (color === \"7\") colorName = \"Trang\";\n      list = list.filter(\n        (item) => String(item.color).toLowerCase() === String(colorName).toLowerCase()\n      );\n    }\n\n    if (material) {\n      let materialName = material;\n      if (material === \"8\") materialName = \"vang\";\n      else if (material === \"9\") materialName = \"kim cuong\";\n      list = list.filter(\n        (item) => String(item.material).toLowerCase() === String(materialName).toLowerCase()\n      );\n    }\n\n    if (sortBy === \"priceAsc\") {\n      list.sort((a, b) => parsePrice(a.price) - parsePrice(b.price));\n    } else if (sortBy === \"priceDesc\") {\n      list.sort((a, b) => parsePrice(b.price) - parsePrice(a.price));\n    } else if (sortBy === \"nameAsc\") {\n      list.sort((a, b) => a.name.localeCompare(b.name));\n    }\n\n    return list;\n  }, [products, priceRange, color, material, sortBy]);\n\n  const toggleFavorite = (productId) => {\n    setFavorites((prev) =>\n      prev.includes(productId)\n        ? prev.filter((id) => id !== productId)\n        : [...prev, productId]\n    );\n  };\n\n  return (\n    <div className=\" flex flex-col items-center gap-[30px] mt-[40px]\">\n      <div className=\" w-[90%]\">\n        <p className=\" text-[32px] text-[#9B8D6F] text-left\">Vòng tay</p>\n      </div>\n      <div className=\"w-[90%] flex flex-row gap-[50px]\">\n        <Filters\n          priceRange={priceRange}\n          color={color}\n          material={material}\n          sortBy={sortBy}\n          onPriceRangeChange={setPriceRange}\n          onColorChange={setColor}\n          onMaterialChange={setMaterial}\n          onSortChange={setSortBy}\n        />\n\n        <div className=\"flex-1\">\n          {status === \"loading\" && (\n            <div className=\"p-4 text-sm text-gray-500\">Đang tải sản phẩm…</div>\n          )}\n          {status === \"failed\" && (\n            <div className=\"p-4 text-sm text-red-500\">Lỗi tải dữ liệu: {String(error)}</div>\n          )}\n          <ProductGrid\n            products={displayedData}\n            favorites={favorites}\n            onToggleFavorite={toggleFavorite}\n          />\n        </div>\n      </div>\n    </div>\n  );\n}\n\r\n"],"names":[],"mappings":"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","debugId":null}}]
}