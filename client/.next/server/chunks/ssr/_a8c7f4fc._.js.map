{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/web-nu%20trang/tierra/client/src/app/%28user%29/ring/%5BringId%5D/page.js"],"sourcesContent":["\"use client\";\nimport React from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { useParams } from \"next/navigation\";\nimport {\n  fetchProducts,\n  selectProductsState,\n} from \"../../../../store/features/couter/fechDataSlice.js\";\nimport { toIntegerVND } from \"../../utils/price\";\nimport CheckIcon from \"../../../assets/icons/check_icon.js\";\n\nconst formatPriceVND = (input) =>\n  new Intl.NumberFormat(\"vi-VN\", { maximumFractionDigits: 0 }).format(\n    toIntegerVND(input)\n  );\n\nexport default function Page() {\n  const dispatch = useDispatch();\n  const { products, status, error } = useSelector(selectProductsState);\n  const params = useParams();\n  const ringId = params?.ringId;\n\n  React.useEffect(() => {\n    if (status === \"idle\") {\n      dispatch(fetchProducts());\n    }\n  }, [status, dispatch]);\n\n  const product = React.useMemo(() => {\n    return Array.isArray(products)\n      ? products.find((p) => String(p?.product_id) === String(ringId))\n      : undefined;\n  }, [products, ringId]);\n\n  const images = Array.isArray(product?.ProductImages)\n    ? product.ProductImages\n    : [];\n  const mainImage = images.find((im) => im?.is_main) || images[0];\n\n  return (\n    <div className=\"w-full flex justify-center mt-6 mb-12\">\n      <div className=\"w-[90%] max-w-[1200px]\">\n        {status === \"failed\" && (\n          <div className=\"p-4 text-sm text-red-500\">\n            Lỗi tải dữ liệu: {String(error)}\n          </div>\n        )}\n\n        {(status === \"loading\" || status === \"idle\") && (\n          <div className=\"p-4 text-sm text-gray-500\">Đang tải sản phẩm...</div>\n        )}\n\n        {status === \"succeeded\" && product && (\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-8\">\n            <div>\n              {mainImage?.image_url && (\n                <img\n                  src={mainImage.image_url}\n                  alt={product.name}\n                  className=\"w-full h-[420px] object-cover rounded-md border\"\n                />\n              )}\n              {images.length > 1 && (\n                <div className=\"mt-4 grid grid-cols-4 gap-3\">\n                  {images.map((img) => (\n                    <img\n                      key={img.image_id}\n                      src={img.image_url}\n                      alt={product.name}\n                      className={`h-[80px] w-full object-cover rounded border ${\n                        img.image_id === mainImage?.image_id\n                          ? \"ring-2 ring-[#9B8D6F]\"\n                          : \"\"\n                      }`}\n                    />\n                  ))}\n                </div>\n              )}\n            </div>\n\n            <div className=\"flex flex-col gap-4\">\n              <h1 className=\"text-2xl font-semibold text-[#3A3A3A]\">\n                {product.name}\n              </h1>\n              {(() => {\n                const priceInt = toIntegerVND(product.price);\n                const discountInt = toIntegerVND(product.discount_price);\n                const hasDiscount =\n                  Number.isFinite(priceInt) &&\n                  Number.isFinite(discountInt) &&\n                  discountInt > 0 &&\n                  discountInt < priceInt;\n                const finalPrice = hasDiscount\n                  ? Math.max(priceInt - discountInt, 0)\n                  : priceInt;\n                return hasDiscount ? (\n                  <div className=\"flex items-baseline gap-2\">\n                    <span className=\"text-xl font-semibold text-[#9B8D6F]\">\n                      {formatPriceVND(finalPrice)} ₫\n                    </span>\n                    <span className=\"text-base text-gray-400 line-through\">\n                      {formatPriceVND(priceInt)} ₫\n                    </span>\n                  </div>\n                ) : (\n                  <div className=\"text-xl text-[#9B8D6F]\">\n                    {formatPriceVND(priceInt)} ₫\n                  </div>\n                );\n              })()}\n              <div className=\" w-[80px] text-sm font-bold\">\n                Chất liệu\n                <div className=\" h-[30px] flex justify-center items-center border rounded-[8px] mt-[20px] font-normal\">\n                  {product.material === \"vang\" ? <>Vàng</> : <>Kim cương</>}\n                </div>\n              </div>\n              <div className=\" text-sm font-bold\">\n                Màu\n                <div className=\"mt-[10px] flex items-center gap-3\">\n                  {(() => {\n                    const current = String(product.color || \"\").toLowerCase();\n                    const colors = [\n                      { key: \"trang\", hex: \"#D6D6D6\" },\n                      { key: \"vang\", hex: \"#F1DC87\" },\n                      { key: \"hong\", hex: \"#F2BAA8\" },\n                    ];\n                    return colors.map((c) => (\n                      <div\n                        key={c.key}\n                        className=\"w-[40px] h-[40px] rounded-[8px] border border-gray-300 relative\"\n                        style={{ backgroundColor: c.hex }}\n                      >\n                        {current === c.key && (\n                          <div className=\"absolute inset-0 flex items-center justify-center\">\n                            <CheckIcon/>\n                          </div>\n                        )}\n                      </div>\n                    ));\n                  })()}\n                </div>\n              </div>\n\n              <div className=\" text-sm font-bold\">\n                Tồn kho:{\"  \"}\n                {Number.isFinite(product.stock_quantity)\n                  ? product.stock_quantity\n                  : \"?\"}\n              </div>\n\n              <div className=\"mt-2 flex gap-4\">\n                <button className=\"px-5 py-2 rounded bg-[#9B8D6F] text-white\">\n                  Thêm vào giỏ\n                </button>\n                <button className=\"px-5 py-2 rounded border border-[#9B8D6F] text-[#9B8D6F]\">\n                  Mua ngay\n                </button>\n              </div>\n            </div>\n            <div className=\" flex flex-col gap-[20px]\">\n              <div className=\" text-[32px] font-medium\">\n                Giới thiệu về sản phẩm\n              </div>\n              <div className=\" text-[24px] font-extralight\">\n                {product.description}\n              </div>\n            </div>\n          </div>\n        )}\n\n        {status === \"succeeded\" && !product && (\n          <div className=\"p-4 text-sm text-gray-500\">\n            Không tìm thấy sản phẩm\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 344, "column": 0}, "map": {"version":3,"sources":["file:///D:/web-nu%20trang/tierra/client/node_modules/next/navigation.js"],"sourcesContent":["module.exports = require('./dist/client/components/navigation')\n"],"names":[],"mappings":"AAAA,OAAO,OAAO","ignoreList":[0],"debugId":null}}]
}