{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///D:/web-nu%20trang/tierra/client/src/store/productsStore.jsx"],"sourcesContent":["\"use client\";\nimport React, { createContext, useCallback, useContext, useMemo, useReducer } from \"react\";\n\nconst initialState = {\n  products: [],\n  status: \"idle\", // idle | loading | succeeded | failed\n  error: null,\n  productDetail: null,\n};\n\nfunction reducer(state, action) {\n  switch (action.type) {\n    case \"FETCH_START\":\n      return { ...state, status: \"loading\", error: null };\n    case \"FETCH_SUCCESS\":\n      return { ...state, status: \"succeeded\", products: action.payload, error: null };\n    case \"FETCH_ERROR\":\n      return { ...state, status: \"failed\", error: action.payload };\n    // case \"SET_PRODUCT_DETAIL\":\n    //   return { ...state, productDetail: action.payload };\n    // case \"CLEAR_PRODUCT_DETAIL\":\n    //   return { ...state, productDetail: null };\n    default:\n      return state;\n  }\n}\n\nconst ProductsContext = createContext(null);\n\nexport function ProductsProvider({ children }) {\n  const [state, dispatch] = useReducer(reducer, initialState);\n\n  const fetchProducts = useCallback(async () => {\n    // Avoid refetch if already loading\n    if (state.status === \"loading\") return;\n    dispatch({ type: \"FETCH_START\" });\n    try {\n      const res = await fetch(\"http://localhost:8000/api/products\", { cache: \"no-store\" });\n      if (!res.ok) throw new Error(`HTTP ${res.status}`);\n      const data = await res.json();\n      dispatch({ type: \"FETCH_SUCCESS\", payload: Array.isArray(data) ? data : [] });\n    } catch (err) {\n      dispatch({ type: \"FETCH_ERROR\", payload: err?.message || \"Fetch failed\" });\n    }\n  }, [state.status]);\n\n  // const setProductDetail = useCallback((product) => {\n  //   dispatch({ type: \"SET_PRODUCT_DETAIL\", payload: product });\n  // }, []);\n\n  // const clearProductDetail = useCallback(() => {\n  //   dispatch({ type: \"CLEAR_PRODUCT_DETAIL\" });\n  // }, []);\n\n  const value = useMemo(\n    () => ({\n      ...state,\n      fetchProducts,\n      // setProductDetail,\n      // clearProductDetail,\n    }),\n    // [state, fetchProducts, setProductDetail, clearProductDetail]\n    [state, fetchProducts]\n  );\n\n  return <ProductsContext.Provider value={value}>{children}</ProductsContext.Provider>;\n}\n\nexport function useProducts() {\n  const context = useContext(ProductsContext);\n  if (!context) throw new Error(\"useProducts must be used within ProductsProvider\");\n  return context;\n}\n\n"],"names":[],"mappings":";;;;;;;AACA;AADA;;;AAGA,MAAM,eAAe;IACnB,UAAU,EAAE;IACZ,QAAQ;IACR,OAAO;IACP,eAAe;AACjB;AAEA,SAAS,QAAQ,KAAK,EAAE,MAAM;IAC5B,OAAQ,OAAO,IAAI;QACjB,KAAK;YACH,OAAO;gBAAE,GAAG,KAAK;gBAAE,QAAQ;gBAAW,OAAO;YAAK;QACpD,KAAK;YACH,OAAO;gBAAE,GAAG,KAAK;gBAAE,QAAQ;gBAAa,UAAU,OAAO,OAAO;gBAAE,OAAO;YAAK;QAChF,KAAK;YACH,OAAO;gBAAE,GAAG,KAAK;gBAAE,QAAQ;gBAAU,OAAO,OAAO,OAAO;YAAC;QAC7D,6BAA6B;QAC7B,wDAAwD;QACxD,+BAA+B;QAC/B,8CAA8C;QAC9C;YACE,OAAO;IACX;AACF;AAEA,MAAM,gCAAkB,IAAA,sNAAa,EAAC;AAE/B,SAAS,iBAAiB,EAAE,QAAQ,EAAE;IAC3C,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,mNAAU,EAAC,SAAS;IAE9C,MAAM,gBAAgB,IAAA,oNAAW,EAAC;QAChC,mCAAmC;QACnC,IAAI,MAAM,MAAM,KAAK,WAAW;QAChC,SAAS;YAAE,MAAM;QAAc;QAC/B,IAAI;YACF,MAAM,MAAM,MAAM,MAAM,sCAAsC;gBAAE,OAAO;YAAW;YAClF,IAAI,CAAC,IAAI,EAAE,EAAE,MAAM,IAAI,MAAM,CAAC,KAAK,EAAE,IAAI,MAAM,EAAE;YACjD,MAAM,OAAO,MAAM,IAAI,IAAI;YAC3B,SAAS;gBAAE,MAAM;gBAAiB,SAAS,MAAM,OAAO,CAAC,QAAQ,OAAO,EAAE;YAAC;QAC7E,EAAE,OAAO,KAAK;YACZ,SAAS;gBAAE,MAAM;gBAAe,SAAS,KAAK,WAAW;YAAe;QAC1E;IACF,GAAG;QAAC,MAAM,MAAM;KAAC;IAEjB,sDAAsD;IACtD,gEAAgE;IAChE,UAAU;IAEV,iDAAiD;IACjD,gDAAgD;IAChD,UAAU;IAEV,MAAM,QAAQ,IAAA,gNAAO,EACnB,IAAM,CAAC;YACL,GAAG,KAAK;YACR;QAGF,CAAC,GACD,+DAA+D;IAC/D;QAAC;QAAO;KAAc;IAGxB,qBAAO,8OAAC,gBAAgB,QAAQ;QAAC,OAAO;kBAAQ;;;;;;AAClD;AAEO,SAAS;IACd,MAAM,UAAU,IAAA,mNAAU,EAAC;IAC3B,IAAI,CAAC,SAAS,MAAM,IAAI,MAAM;IAC9B,OAAO;AACT","debugId":null}},
    {"offset": {"line": 134, "column": 0}, "map": {"version":3,"sources":["file:///D:/web-nu%20trang/tierra/client/src/store/Providers.jsx"],"sourcesContent":["\"use client\";\nimport React from \"react\";\nimport { ProductsProvider } from \"./productsStore.jsx\";\n\nexport default function Providers({ children }) {\n  return <ProductsProvider>{children}</ProductsProvider>;\n}\n\n"],"names":[],"mappings":";;;;;AACA;AACA;AAFA;;;;AAIe,SAAS,UAAU,EAAE,QAAQ,EAAE;IAC5C,qBAAO,8OAAC,kJAAgB;kBAAE;;;;;;AAC5B","debugId":null}}]
}