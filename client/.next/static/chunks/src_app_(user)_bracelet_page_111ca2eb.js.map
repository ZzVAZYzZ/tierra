{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/web-nu%20trang/tierra/client/src/app/%28user%29/bracelet/page.js"],"sourcesContent":["\"use client\";\nimport React from \"react\";\nimport Filters from \"../ring/components/Filters\";\nimport ProductGrid from \"../ring/components/ProductGrid\";\nimport { toIntegerVND } from \"../ring/utils/price\";\nimport { useProducts } from \"../../../store/productsStore.jsx\";\n\nconst parsePrice = toIntegerVND;\n\nexport default function Page() {\n  const { products, status, error, fetchProducts } = useProducts();\n  const [favorites, setFavorites] = React.useState([]);\n\n  React.useEffect(() => {\n    if (status === \"idle\") {\n      fetchProducts();\n    }\n  }, [status, fetchProducts]);\n\n  const [priceRange, setPriceRange] = React.useState(\"\");\n  const [color, setColor] = React.useState(\"\");\n  const [material, setMaterial] = React.useState(\"\");\n  const [sortBy, setSortBy] = React.useState(\"\");\n\n  const displayedData = React.useMemo(() => {\n    let list = Array.isArray(products) ? [...products] : [];\n\n    // category filter for \"vong tay\"\n    list = list.filter((item) => {\n      const cat = item?.Category?.name || \"\";\n      return String(cat).trim().toLowerCase() === \"vong tay\";\n    });\n\n    if (priceRange) {\n      let min = 0, max = Infinity;\n      if (priceRange.includes(\"-\")) {\n        const [minStr, maxStr] = priceRange.split(\"-\");\n        min = Number(minStr);\n        max = Number(maxStr);\n      } else {\n        if (priceRange === \"1\") {\n          min = 0;\n          max = 20;\n        } else if (priceRange === \"2\") {\n          min = 20;\n          max = 30;\n        } else if (priceRange === \"3\") {\n          min = 30;\n          max = 40;\n        } else if (priceRange === \"4\") {\n          min = 40;\n          max = 100;\n        }\n      }\n      list = list.filter((item) => {\n        const price = parsePrice(item.price);\n        return price >= min * 1_000_000 && price <= max * 1_000_000;\n      });\n    }\n\n    if (color) {\n      let colorName = color;\n      if (color === \"5\") colorName = \"Vang\";\n      else if (color === \"6\") colorName = \"Vang hong\";\n      else if (color === \"7\") colorName = \"Trang\";\n      list = list.filter(\n        (item) => String(item.color).toLowerCase() === String(colorName).toLowerCase()\n      );\n    }\n\n    if (material) {\n      let materialName = material;\n      if (material === \"8\") materialName = \"vang\";\n      else if (material === \"9\") materialName = \"kim cuong\";\n      list = list.filter(\n        (item) => String(item.material).toLowerCase() === String(materialName).toLowerCase()\n      );\n    }\n\n    if (sortBy === \"priceAsc\") {\n      list.sort((a, b) => parsePrice(a.price) - parsePrice(b.price));\n    } else if (sortBy === \"priceDesc\") {\n      list.sort((a, b) => parsePrice(b.price) - parsePrice(a.price));\n    } else if (sortBy === \"nameAsc\") {\n      list.sort((a, b) => a.name.localeCompare(b.name));\n    }\n\n    return list;\n  }, [products, priceRange, color, material, sortBy]);\n\n  const toggleFavorite = (productId) => {\n    setFavorites((prev) =>\n      prev.includes(productId)\n        ? prev.filter((id) => id !== productId)\n        : [...prev, productId]\n    );\n  };\n\n  return (\n    <div className=\" flex flex-col items-center gap-[30px] mt-[40px]\">\n      <div className=\" w-[90%]\">\n        <p className=\" text-[32px] text-[#9B8D6F] text-left\">Vòng tay</p>\n      </div>\n      <div className=\"w-[90%] flex flex-row gap-[50px]\">\n        <Filters\n          priceRange={priceRange}\n          color={color}\n          material={material}\n          sortBy={sortBy}\n          onPriceRangeChange={setPriceRange}\n          onColorChange={setColor}\n          onMaterialChange={setMaterial}\n          onSortChange={setSortBy}\n        />\n\n        <div className=\"flex-1\">\n          {status === \"loading\" && (\n            <div className=\"p-4 text-sm text-gray-500\">Đang tải sản phẩm…</div>\n          )}\n          {status === \"failed\" && (\n            <div className=\"p-4 text-sm text-red-500\">Lỗi tải dữ liệu: {String(error)}</div>\n          )}\n          <ProductGrid\n            products={displayedData}\n            favorites={favorites}\n            onToggleFavorite={toggleFavorite}\n          />\n        </div>\n      </div>\n    </div>\n  );\n}\n\r\n"],"names":[],"mappings":"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","debugId":null}}]
}